const translations = {
  pt: {
    "meta-title": "Descomplica DEV Na Gringa | Treinamento Carreira Internacional",
    "meta-description": "Treinamento para DEVs Seniores conquistarem vagas internacionais em dólar/euro. Método validado em entrevistas reais.",
    "cta-link": "https://pay.hotmart.com/G101388470S",
    "nav-home": "Início",
    "nav-method": "O Método",
    "nav-mentor": "Mentor",
    "nav-faq": "FAQ",
    "nav-cta": "Garantir Vaga",
    "hero-badge": "Não é Sorte. São dados, evidências e provas reais, auditáveis e replicáveis.",
    "hero-title": "Seu Código Vale <br /><span class='text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-600'>Dólar ou Euro</span>",
    "hero-subtitle": "Não existe \"eu acho\". Existe o que aprova. Acesse o único método baseado em um <strong>banco de dados de 5 anos de entrevistas gravadas</strong> e auditáveis para QA, iOS, DevOps e Fullstack.",
    "hero-cta-primary": "Quero Acessar o Treinamento",
    "hero-cta-secondary": "Ver as Provas",
    "section-problem-title": "Pare de Jogar o Jogo da Adivinhação.",
    "section-problem-text": "Enquanto você tenta descobrir o que o recrutador quer ouvir, meus alunos têm o <strong>gabarito</strong>. A diferença entre quem passa e quem trava não é código. <strong class='text-cyan-400'>É informação privilegiada.</strong>",
    "section-problem-quote": "\"Eu não 'acho' que isso funciona. Eu tenho <strong>5 anos de gravações de entrevistas reais</strong> — minhas e dos meus alunos — em stacks variadas como <strong>QA, iOS, DevOps e Backend</strong>. Eu mapeei cada pergunta, cada objeção e cada resposta que gerou uma oferta em Dólar.\"",
    "section-problem-mentor-tag": "Compilador de Dados de Mercado",
    "method-title": "Reconhecimento de Padrões",
    "method-subtitle": "Eu não ensino 'dicas'. Eu ensino padrões extraídos de centenas de horas de filmagens reais.",
    "method-card-1-title": "Posicionamento",
    "method-card-1-text": "LinkedIn magnético e portfólio estratégico. Torne-se a opção óbvia para os recrutadores internacionais.",
    "method-card-2-title": "Inglês Técnico",
    "method-card-2-text": "Aprenda o inglês que aprova. Vocabulário para defender suas ideias e negociar com confiança.",
    "method-card-3-title": "Aprovação",
    "method-card-3-text": "Simulações baseadas em entrevistas reais. Saiba exatamente o que responder em cada etapa.",
    "proof-title": "Aprovação Auditável",
    "proof-subtitle": "Não são apenas prints. São carreiras transformadas. <b>Dúvida? Clique nos depoimentos e fale diretamente com os alunos.</b>",
    "proof-footer": "Dados extraídos do <a href='https://docs.google.com/document/d/1n4Tpy6o1B6RlUC-2Aiv0McErMCKlPtuqHP5INCLCBKs/edit?usp=sharing' target='_blank' class='text-cyan-600 hover:text-cyan-400 underline'>documento público de resultados</a>",
    "mentor-title": "Quem é seu mentor?",
    "mentor-p1": "Sou <a href='https://eu.robsoncassiano.software/' target='_blank' rel='noopener noreferrer' class='text-cyan-400 hover:text-cyan-300 transition-colors'><strong>Robson Cassiano</strong></a>. Atualmente na <b>Epic Games</b>. Ex-BTG Pactual, Founder da Simple Software Tryquetra e Professor de Inglês certificado (CELTA).",
    "mentor-p2": "Eu vivo o que ensino. Trabalho para clientes nos EUA e Europa, ganhando em moeda forte. Eu cansei de ver brasileiros talentosos ganhando pouco. Por isso criei este método.",
    "mentor-tag-1": "DEV desde 2018",
    "mentor-tag-2": "CELTA Cambridge",
    "mentor-tag-3": "Founder Simple Software",
    "guarantee-title": "Risco Zero",
    "guarantee-text": "Você tem 7 dias de garantia incondicional. Se não gostar, eu devolvo 100% do seu dinheiro. Sem perguntas.",
    "guarantee-cta": "Garantir minha vaga com segurança",
    "faq-title": "Dúvidas Frequentes",
    "faq-q1": "Para quem é o treinamento?",
    "faq-a1": "Focada em profissionais de TI (Devs, QAs, Data) que já tem experiência técnica (Sênior/Pleno) e querem migrar para o mercado internacional.",
    "faq-q2": "Preciso ser fluente em inglês?",
    "faq-a2": "Não. Você precisa de inglês técnico e estratégico para entrevistas. O método inclui módulos específicos para destravagem rápida da fala necessária.",
    "faq-q3": "Como funciona o pagamento?",
    "faq-a3": "Pagamento seguro via Hotmart. Aceitamos Pix, Boleto e Cartão de Crédito em até 12x.",
    "faq-q4": "O treinamento async é adequado para quem tem pouca experiência (estagiários ou juniores)?",
    "faq-a4": "Sim. O conteúdo é fundamentalista e atemporal, não dependendo de 'hypes' de mercado. O tempo atua a favor do iniciante: estudar e aplicar o método desde cedo facilita a disputa por vagas e acelera a maturação técnica necessária para posições globais.",
    "faq-q5": "Qual a diferença entre o 'Treinamento Async' e o modelo tradicional '1-on-1'?",
    "faq-a5": "<p>O Treinamento Async foca na eficiência e autonomia com suporte contínuo.</p><p><strong>O que inclui:</strong> Suporte e direcionamento direto pelo WhatsApp pessoal do mentor, acesso ao grupo de vagas e descontos exclusivos com professor nativo (EUA).</p><p><strong>O que não inclui:</strong> Agenda síncrona/reuniões agendadas 'one-on-one' (ex: chamadas de 1h).</p>",
    "faq-q6": "O método funciona para quem busca vagas no Brasil?",
    "faq-a6": "Sim. Aplica-se o princípio lógico de 'quem pode o mais, pode o menos'. Ao se preparar para processos de alta complexidade (como Amazon e vagas internacionais), você estará superqualificado para a grande maioria das posições no mercado doméstico.",
    "faq-q7": "Sou de outra stack (Python, C#, etc.). O conteúdo é focado apenas em Java?",
    "faq-a7": "<p>Não. Embora Java/Kotlin sejam as linguagens recomendadas para Software Engineers dentro do método, a preparação comportamental, estrutural e de entrevistas serve para qualquer área da tecnologia (incluindo QAs e Cientistas de Dados).</p><p><strong>Limite de Escopo:</strong> O método cobre desde o nível Júnior até o cargo de Tech Lead. Não cobre cargos gerenciais/executivos acima disso.</p>",
    "faq-q8": "Terei acesso a material de preparação para entrevistas?",
    "faq-a8": "Sim, 100% do material preparatório está incluso.",
    "faq-q9": "Por quanto tempo terei acesso ao conteúdo?",
    "faq-a9": "O acesso é vitalício. Isso garante que você receba todas as melhorias e atualizações futuras do treinamento, documentadas com base em novas evidências e provas reais do mercado.",
    "comments-title": "Comentários da Comunidade",
    "footer-rights": "&copy; 2025 SIMPLE SOFTWARE LTDA. Todos os direitos reservados.",
    "footer-terms": "Termos do Nosso Acordo",
    "footer-youtube": "Canal Youtube",
    "footer-linkedin": "LinkedIn",
    "footer-portfolio": "Portfólio",
    "footer-newsletter": "Newsletter",
    "calc-title": "Calculadora de Arbitragem",
    "calc-subtitle": "Quanto você está deixando na mesa por não trabalhar para a gringa?",
    "calc-label-salary": "Salário Mensal Atual (BRL)",
    "calc-label-usd": "USD Rate",
    "calc-label-target": "Salário Alvo (USD)",
    "calc-result-label": "Potencial de Ganho Extra",
    "calc-result-monthly": "A mais por mês (Bruto)",
    "stat-hours": "Horas de Entrevistas",
    "stat-offers": "Propostas Mapeadas",
    "stat-countries": "Países Atuantes",
    "stat-students": "Alunos em Transição",
    "terms-modal-title": "Termos e Condições de Treinamento de Carreira Internacional da Simple Software LTDA",
    "terms-s1-title": "1. Serviços",
    "terms-s1-text": "A Simple Software LTDA (\"Mentor\") oferece treinamento para programadores que buscam carreiras internacionais. Isso inclui estratégias de busca de emprego, desenvolvimento de habilidades, preparação para entrevistas, negociação salarial e aulas de inglês.",
    "terms-s2-title": "2. Objetivo",
    "terms-s2-text": "Ajudar você a conseguir um emprego como programador no exterior.",
    "terms-s3-title": "3. Reembolso",
    "terms-s3-text": "<strong class='text-white'>Garantia Incondicional</strong>: Se você não estiver satisfeito, solicite o reembolso por e-mail e devolvemos integralmente seu dinheiro, solicite no prazo de até 7 dias.",
    "terms-s4-title": "4. Cancelamento",
    "terms-s4-text": "Você pode cancelar o treinamento a qualquer momento. Se tiver cumprido a checklist e não conseguiu a vaga, solicite o reembolso integral.",
    "terms-s5-title": "5. Confidencialidade",
    "terms-s5-text": "Suas informações serão mantidas em sigilo, exceto quando exigido por lei.",
    "terms-s6-title": "6. Responsabilidades",
    "terms-s6-text": "Você precisa fornecer informações precisas e se comprometer com as tarefas do treinamento. O sucesso depende do seu esforço também.",
    "terms-s7-title": "7. Limitação de Responsabilidade",
    "terms-s7-text": "Não garantimos resultados específicos ou a obtenção de um emprego, apenas temos métodos comprovados de colocar as probabilidades a seu favor durante todas as fases do processo seletivo e também não realizo as entrevistas por você, no seu lugar, jamais.",
    "terms-s8-title": "8. Privacidade",
    "terms-s8-text": "Coletamos apenas informações necessárias para fornecer o serviço. Não compartilhamos seus dados pessoais, exceto quando exigido por lei. Você pode recusar o fornecimento de informações, mas isso pode limitar o acesso a alguns serviços.",
    "terms-s9-title": "9. Alterações",
    "terms-s9-text": "Podemos revisar estes termos a qualquer momento, com aviso prévio.",
    "terms-s10-title": "10. Lei e Jurisdição",
    "terms-s10-text": "Estes termos são regidos pelas leis de São Paulo, Brasil.",
    "terms-s11-title": "11. Compromisso do Usuário",
    "terms-s11-item1": "Usar o conteúdo de forma adequada.",
    "terms-s11-item2": "Não se envolver em atividades ilegais ou prejudiciais.",
    "terms-s11-item3": "Não causar danos aos sistemas da Simple Software LTDA ou de terceiros.",
    "terms-s12-title": "12. Uso de Imagem e Voz",
    "terms-s12-text": "Ao participar dos treinamentos, você autoriza por prazo indeterminado a Simple Software LTDA a gravar sua imagem e voz durante as aulas. Este material poderá ser utilizado para fins educacionais e promocionais, incluindo a criação de novos conteúdos e materiais de divulgação.",
    "terms-s12-notice": "<strong class='text-white'>Caso você não concorde com o uso de sua imagem e voz, por favor, informe a Simple Software LTDA por e-mail antes do início dos treinamentos.</strong>",
    "terms-footer-questions": "Dúvidas? Entre em contato conosco!",
    "terms-footer-confirm": "Ao aceitar estes termos, você confirma que leu, entendeu e concorda com todas as condições.",
    "terms-cta": "Parece justo, vamos lá!"
  },
  en: {
    "meta-title": "Global DEV Playbook | International Career Training",
    "meta-description": "Training for Senior DEVs to conquer international jobs in Dollar/Euro. Method validated in real interviews.",
    "cta-link": "https://pay.hotmart.com/G101388470S?off=en_US",
    "nav-home": "Home",
    "nav-method": "The Method",
    "nav-mentor": "Mentor",
    "nav-faq": "FAQ",
    "nav-cta": "Secure Spot",
    "hero-badge": "It's Not Luck. It's real data, evidence, and proof, auditable and replicable.",
    "hero-title": "Your Code is Worth <br /><span class='text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-600'>Dollar or Euro</span>",
    "hero-subtitle": "There is no \"I think\". There is what passes. Access the only method based on a <strong>5-year database of recorded interviews</strong> and auditable results for QA, iOS, DevOps, and Fullstack.",
    "hero-cta-primary": "Access the Training",
    "hero-cta-secondary": "See the Proofs",
    "calc-title": "Arbitrage Calculator",
    "calc-subtitle": "How much are you leaving on the table by not working abroad?",
    "calc-label-salary": "Current Monthly Salary (BRL)",
    "calc-label-usd": "USD Rate",
    "calc-label-target": "Target Salary (USD)",
    "calc-result-label": "Extra Earning Potential",
    "calc-result-monthly": "Extra per month (Gross)",
    "stat-hours": "Hours of Real Recorded Interviews",
    "stat-offers": "Mapped Offers",
    "stat-countries": "Active Countries",
    "stat-students": "Students in Transition",
    "proof-title": "Auditable Results",
    "proof-subtitle": "These aren't just screenshots. These are transformed careers. <b>Skeptical? Click the testimonials and talk directly to the students.</b>",
    "proof-footer": "Data extracted from the <a href='https://docs.google.com/document/d/1n4Tpy6o1B6RlUC-2Aiv0McErMCKlPtuqHP5INCLCBKs/edit?usp=sharing' target='_blank' class='text-cyan-600 hover:text-cyan-400 underline'>public results document</a>",
    "mentor-title": "Who is your mentor?",
    "mentor-p1": "I am <a href='https://eu.robsoncassiano.software/' target='_blank' rel='noopener noreferrer' class='text-cyan-400 hover:text-cyan-300 transition-colors'><strong>Robson Cassiano</strong></a>. Currently at <b>Epic Games</b>. Ex-BTG Pactual, Founder of Simple Software Tryquetra, and Cambridge certified English Teacher (CELTA).",
    "mentor-p2": "I live what I teach. I work for clients in the US and Europe, earning in strong currency. I got tired of seeing talented Brazilians earning little. That's why I created this method.",
    "mentor-tag-1": "DEV since 2018",
    "mentor-tag-2": "CELTA Cambridge",
    "mentor-tag-3": "Founder Simple Software",
    "guarantee-title": "Zero Risk",
    "guarantee-text": "You have a 7-day unconditional guarantee. If you don't like it, I'll refund 100% of your money. No questions asked.",
    "guarantee-cta": "Secure my spot safely",
    "faq-title": "Frequently Asked Questions",
    "faq-q1": "Who is the training for?",
    "faq-a1": "Focused on IT professionals (Devs, QAs, Data) who already have technical experience (Senior/Mid) and want to migrate to the international market.",
    "faq-q2": "Do I need to be fluent in English?",
    "faq-a2": "No. You need technical and strategic English for interviews. The method includes specific modules for quickly unlocking the necessary speaking skills.",
    "faq-q3": "How does payment work?",
    "faq-a3": "Secure payment via Hotmart. We accept Pix, Bank Slip, and Credit Card in up to 12 installments.",
    "faq-q4": "Is the async training suitable for those with little experience (interns or juniors)?",
    "faq-a4": "Yes. The content is fundamentalist and timeless, not depending on market 'hypes'. Time works in favor of the beginner: studying and applying the method early makes it easier to compete for jobs and accelerates technical maturity.",
    "faq-q5": "What is the difference between 'Async Training' and the traditional '1-on-1' model?",
    "faq-a5": "<p>Async Training focuses on efficiency and autonomy with continuous support.</p><p><strong>What's included:</strong> Support and direct guidance via the mentor's personal WhatsApp, access to the job group, and exclusive discounts with a native teacher (USA).</p><p><strong>What's not included:</strong> Synchronous schedule/scheduled 'one-on-one' meetings (e.g., 1h calls).</p>",
    "faq-q6": "Does the method work for those looking for jobs in Brazil?",
    "faq-a6": "Yes. The logical principle of 'he who can do more can do less' applies. By preparing for high-complexity processes (like Amazon and international jobs), you will be overqualified for most domestic positions.",
    "faq-q7": "I'm from another stack (Python, C#, etc.). Is the content focused only on Java?",
    "faq-a7": "<p>No. Although Java/Kotlin are the recommended languages for Software Engineers within the method, the behavioral, structural, and interview preparation works for any technology area (including QAs and Data Scientists).</p><p><strong>Scope limit:</strong> The method covers from Junior level up to Tech Lead. It does not cover management/executive roles above that.</p>",
    "faq-q8": "Will I have access to interview preparation material?",
    "faq-a8": "Yes, 100% of the preparatory material is included.",
    "faq-q9": "How long will I have access to the content?",
    "faq-a9": "Access is lifelong. This ensures you receive all future improvements and updates to the training, documented based on new evidence and real market proof.",
    "comments-title": "Community Comments",
    "footer-rights": "&copy; 2025 SIMPLE SOFTWARE LTDA. All rights reserved.",
    "footer-terms": "Terms of Our Agreement",
    "footer-youtube": "YouTube Channel",
    "footer-linkedin": "LinkedIn",
    "footer-portfolio": "Portfolio",
    "footer-newsletter": "Newsletter",
    "terms-modal-title": "International Career Training Terms and Conditions - Simple Software LTDA",
    "terms-s1-title": "1. Services",
    "terms-s1-text": "Simple Software LTDA (\"Mentor\") offers training for programmers seeking international careers. This includes job search strategies, skill development, interview preparation, salary negotiation, and English classes.",
    "terms-s2-title": "2. Objective",
    "terms-s2-text": "To help you secure a job as a programmer abroad.",
    "terms-s3-title": "3. Refund",
    "terms-s3-text": "<strong class='text-white'>Unconditional Guarantee</strong>: If you are not satisfied, request a refund by email and we will return your money in full, request it within 7 days.",
    "terms-s4-title": "4. Cancellation",
    "terms-s4-text": "You can cancel the training at any time. If you have completed the checklist and did not get the job, request a full refund.",
    "terms-s5-title": "5. Confidentiality",
    "terms-s5-text": "Your information will be kept confidential, except when required by law.",
    "terms-s6-title": "6. Responsibilities",
    "terms-s6-text": "You must provide accurate information and commit to the training tasks. Success also depends on your effort.",
    "terms-s7-title": "7. Limitation of Liability",
    "terms-s7-text": "We do not guarantee specific results or obtaining a job; we only have proven methods to put the odds in your favor during all phases of the selection process. I also do not perform interviews for you, in your place, ever.",
    "terms-s8-title": "8. Privacy",
    "terms-s8-text": "We only collect information necessary to provide the service. We do not share your personal data except when required by law. You can refuse to provide information, but this may limit access to some services.",
    "terms-s9-title": "9. Changes",
    "terms-s9-text": "We may revise these terms at any time, with prior notice.",
    "terms-s10-title": "10. Law and Jurisdiction",
    "terms-s10-text": "These terms are governed by the laws of São Paulo, Brazil.",
    "terms-s11-title": "11. User Commitment",
    "terms-s11-item1": "Use the content appropriately.",
    "terms-s11-item2": "Do not engage in illegal or harmful activities.",
    "terms-s11-item3": "Do not cause damage to Simple Software LTDA systems or third parties.",
    "terms-s12-title": "12. Use of Image and Voice",
    "terms-s12-text": "By participating in the training sessions, you authorize Simple Software LTDA indefinitely to record your image and voice during classes. This material may be used for educational and promotional purposes, including the creation of new content and marketing materials.",
    "terms-s12-notice": "<strong class='text-white'>If you do not agree to the use of your image and voice, please inform Simple Software LTDA by email before the training begins.</strong>",
    "terms-footer-questions": "Questions? Contact us!",
    "terms-footer-confirm": "By accepting these terms, you confirm that you have read, understood, and agree to all conditions.",
    "terms-cta": "Sounds fair, let's go!"
  }
};

// Mobile Menu logic
const mobileMenuButton = document.getElementById('mobile-menu-button');
const closeMobileMenuButton = document.getElementById('close-mobile-menu');
const mobileMenu = document.getElementById('mobile-menu');
const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');

if (mobileMenuButton && closeMobileMenuButton && mobileMenu) {
  mobileMenuButton.addEventListener('click', () => {
    mobileMenu.classList.add('open');
  });

  closeMobileMenuButton.addEventListener('click', () => {
    mobileMenu.classList.remove('open');
  });

  mobileNavLinks.forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu.classList.remove('open');
    });
  });
}

// i18n Logic
const getPreferredLanguage = () => {
  const urlParams = new URLSearchParams(window.location.search);
  const langParam = urlParams.get('lang')?.toLowerCase();

  const map = {
    'pt': 'pt', 'br': 'pt',
    'en': 'en', 'us': 'en', 'uk': 'en'
  };

  if (langParam) {
    const baseLang = langParam.split('-')[0];
    if (map[baseLang]) return map[baseLang];
    if (translations[baseLang]) return baseLang;
  }

  const saved = localStorage.getItem('preferred-lang');
  if (saved) return saved;
  const browserLang = navigator.language.split('-')[0];
  return translations[browserLang] ? browserLang : 'pt';
};

let currentLang = getPreferredLanguage();

const updateContent = (lang) => {
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (translations[lang] && translations[lang][key]) {
      if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
        el.placeholder = translations[lang][key];
      } else {
        el.innerHTML = translations[lang][key];
      }
    }
  });

  // Update Hrefs
  document.querySelectorAll('[data-i18n-href]').forEach(el => {
    const key = el.getAttribute('data-i18n-href');
    if (translations[lang] && translations[lang][key]) {
      el.href = translations[lang][key];
    }
  });

  // Update Meta Tags
  if (translations[lang]) {
    document.title = translations[lang]['meta-title'];
    const metaDesc = document.querySelector('meta[name="description"]');
    if (metaDesc) metaDesc.setAttribute('content', translations[lang]['meta-description']);
  }

  document.documentElement.lang = lang === 'pt' ? 'pt-BR' : 'en';

  // Update switcher buttons state - using border and text colors
  document.querySelectorAll('.lang-btn').forEach(btn => {
    if (btn.getAttribute('data-lang') === lang) {
      btn.classList.add('text-cyan-400', 'border-cyan-400');
      btn.classList.remove('text-slate-400', 'border-transparent');
    } else {
      btn.classList.remove('text-cyan-400', 'border-cyan-400');
      btn.classList.add('text-slate-400', 'border-transparent');
    }
  });
};

const setLanguage = (lang) => {
  currentLang = lang;
  localStorage.setItem('preferred-lang', lang);

  // Update URL with lang parameter
  const url = new URL(window.location.href);
  url.searchParams.set('lang', lang);
  window.history.pushState({}, '', url);

  updateContent(lang);
};

// Initialize
const init = () => {
  document.body.classList.add('loaded');
  updateContent(currentLang);

  // Scroll Reveal Observer
  const revealObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('active');
        if (entry.target.querySelector('.counter-val')) {
          startCounters(entry.target);
        }
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));

  // Fab Visibility
  const fab = document.getElementById('fab-cta');
  window.addEventListener('scroll', () => {
    if (window.scrollY > 500) {
      fab.classList.add('visible');
    } else {
      fab.classList.remove('visible');
    }
  });

  // Glass Card Glow Effect
  document.addEventListener('mousemove', (e) => {
    document.querySelectorAll('.glass-card').forEach(card => {
      const rect = card.getBoundingClientRect();
      const x = ((e.clientX - rect.left) / rect.width) * 100;
      const y = ((e.clientY - rect.top) / rect.height) * 100;
      card.style.setProperty('--x', `${x}%`);
      card.style.setProperty('--y', `${y}%`);
    });
  });

  // Arbitrage Calculator Logic
  const calcInputs = ['current-salary', 'usd-rate', 'target-salary-usd'];
  calcInputs.forEach(id => {
    document.getElementById(id)?.addEventListener('input', calculateArbitrage);
  });
  calculateArbitrage();

  // Delegation for language buttons
  document.addEventListener('click', (e) => {
    const btn = e.target.closest('.lang-btn');
    if (btn) {
      const lang = btn.getAttribute('data-lang');
      if (lang) setLanguage(lang);
    }
  });

  // Terms Modal Logic
  const openTermsBtn = document.getElementById('open-terms');
  const closeTermsBtn = document.getElementById('close-terms');
  const termsModal = document.getElementById('terms-modal');

  if (openTermsBtn && closeTermsBtn && termsModal) {
    openTermsBtn.addEventListener('click', (e) => {
      e.preventDefault();
      termsModal.classList.add('open');
      document.body.style.overflow = 'hidden'; // Prevent scrolling
    });

    closeTermsBtn.addEventListener('click', () => {
      termsModal.classList.remove('open');
      document.body.style.overflow = '';
    });

    termsModal.addEventListener('click', (e) => {
      if (e.target === termsModal) {
        termsModal.classList.remove('open');
        document.body.style.overflow = '';
      }
    });
  }
};


const calculateArbitrage = () => {
  const current = parseFloat(document.getElementById('current-salary')?.value) || 0;
  const rate = parseFloat(document.getElementById('usd-rate')?.value) || 0;
  const targetUsd = parseFloat(document.getElementById('target-salary-usd')?.value) || 0;

  const targetBrl = targetUsd * rate;
  const diff = targetBrl - current;

  const resultEl = document.getElementById('calc-result-value');
  if (resultEl) {
    resultEl.innerText = new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL', maximumFractionDigits: 0 }).format(diff > 0 ? diff : 0);
  }
};

const startCounters = (parent) => {
  parent.querySelectorAll('.counter-val').forEach(counter => {
    const target = +counter.getAttribute('data-target');
    const duration = 2000;
    const increment = target / (duration / 16);
    let current = 0;

    const update = () => {
      current += increment;
      if (current < target) {
        counter.innerText = Math.ceil(current) + '+';
        requestAnimationFrame(update);
      } else {
        counter.innerText = target + '+';
      }
    };
    update();
  });
};

if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', init);
} else {
  init();
}
